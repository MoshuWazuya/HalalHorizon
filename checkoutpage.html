<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Checkout Page</title>
    <link rel="stylesheet" href="checkoutpage.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Booking for Your Travel!</h1>
        </div>
        
        <div class="card">
            <h2>Enter Your Travel Details</h2>
            <form id="checkout-form">
                <div class="form-group">
                    <label for="destination">Destination</label>
                    <input type="text" id="destination" readonly>
                </div>

                <div class="form-group">
                    <label for="packages">Selected Package</label>
                    <input type="text" id="packages" readonly>
                </div>

                <div class="form-group">
                    <label for="dates">Travel Dates</label>
                    <input type="date" id="dates" required>
                </div>

                <div class="form-group">
                    <label for="adults">Adults</label>
                    <input type="number" id="adults" min="1" max="10" value="1" required>
                </div>

                <div class="form-group">
                    <label for="kids">Kids</label>
                    <input type="number" id="kids" min="0" max="10" value="0">
                </div>

                <div class="form-group">
                    <label for="special-requests">Special Requests</label>
                    <textarea id="special-requests" placeholder="Enter any special requests"></textarea>
                </div>

                <button type="submit" class="submitbutton">Checkout</button>
                <a href="homepage.html">Go Back</a>
            </form>
        </div>
    </div>

    <script>
        // Define a mapping of locations to their full names
        const locationMapping = {
            paris: "Paris, France",
            maldives: "Maldives",
            tokyo: "Tokyo, Japan",
            new_york: "New York, USA",
            sydney: "Sydney, Australia",
            cape_town: "Cape Town, South Africa"
        };

        // Retrieve query parameters from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const locationName = urlParams.get('location'); // e.g., "paris"
        const packageName = urlParams.get('package'); // e.g., "Romantic Getaway"

        // Populate destination and package fields dynamically
        const destinationField = document.getElementById('destination');
        const packageField = document.getElementById('packages');

        if (locationName) {
            // Set the destination field to the full name from the mapping
            destinationField.value = locationMapping[locationName] || "Unknown Location";
        } else {
            destinationField.value = "No location selected";
        }

        if (packageName) {
            // Set the package field to the selected package name
            packageField.value = packageName;
        } else {
            packageField.value = "No package selected";
        }

        // Handle form submission
        document.getElementById("checkout-form").addEventListener("submit", function(event) {
            event.preventDefault();

            // Collect form data
            const bookingDetails = {
                destination: destinationField.value,
                package: packageField.value,
                date: document.getElementById("dates").value,
                adults: document.getElementById("adults").value,
                kids: document.getElementById("kids").value,
                specialRequests: document.getElementById("special-requests").value,
            };

            // Retrieve existing bookings from localStorage
            const bookings = JSON.parse(localStorage.getItem("bookings")) || [];

            // Add the new booking to the list
            bookings.push(bookingDetails);

            // Save the updated bookings list back to localStorage
            localStorage.setItem("bookings", JSON.stringify(bookings));

            // Redirect to the Bookings page
            window.location.href = "bookings.html";
        });
    </script>
</body>
</html>
